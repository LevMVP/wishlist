<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="5;url=" id="redirectMeta">
    <script type="text/javascript">
        // Get parameters from the URL (e.g., campaign_id, source, etc.)
        var urlParams = new URLSearchParams(window.location.search);
        var subid = urlParams.get('subid');
        var campaign_id = urlParams.get('campaign_id');
        var source = urlParams.get('source');
        
        // Default redirect if parameters are missing
        var redirectUrl = "https://www.your-fallback-url.com"; // Default URL for no parameters

        // Mask the final affiliate destination URL by using a "masking" URL
        if (subid && campaign_id && source) {
            // Construct the dynamic masking URL for further redirection
            redirectUrl = "https://www.your-pre-lander.com/mask?subid=" + subid + "&campaign_id=" + campaign_id + "&source=" + source;
        }

        // Update the meta refresh tag to handle redirect
        document.getElementById("redirectMeta").setAttribute('content', '5;url=' + redirectUrl);

        // Handle the redirect after 5 seconds
        setTimeout(function() {
            window.location.href = redirectUrl;
        }, 5000); // Redirect after 5 seconds

        // Update the manual redirect link
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("manual-redirect").setAttribute('href', redirectUrl);
        });
    </script>
    <title>Redirecting...</title>
</head>
<body>
    <p>If you are not redirected automatically, please click <a href="#" id="manual-redirect">here</a>.</p>
</body>
</html>
